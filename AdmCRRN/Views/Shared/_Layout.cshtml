@using AdmCRRN.Models
@using AdmCRRN.Models.Sessoes
@using AdmCRRN.Models.Transporte
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/bootstrap.min.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/modernizr-1.7.min.js")" type="text/javascript"></script>
    <style type="text/css">
        body
        {
            padding-top: 10px;
            padding-bottom: 40px;
        }
        .sidebar-nav
        {
            padding: 9px 0;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        @if (!ContaSession.UsuarioDoPerfilSuper())
        {
            var instituicao = ContaSession.ContaNaSessao().Instituicao;
            var endereco = ContaSession.ContaNaSessao().Instituicao.Endereco;
            var entidade = @ContaSession.ContaDoTipoEntidade() ? (Entidade)instituicao : null;

            <div class="row-fluid">
                <div class="span3">
                    <ul class="nav nav-pills nav-stacked">
                        <li class="active"><a><i class="icon-user icon-white"></i> @User.Identity.Name</a></li>
                        <li class="active"><a><i class="icon-envelope icon-white"></i> @ContaSession.UsuarioMemberShip().Email</a></li>
                        <li class="active"><a><i class="icon-comment icon-white"></i> @ContaSession.UsuarioMemberShip().LastLoginDate</a></li>
                    </ul>
                </div>
                <div class="span9">
                    <h1>
                        @ContaSession.ContaNaSessao().Instituicao.Nome
                    </h1>
                    <address>
                        <strong>@instituicao.CNPJ</strong><br>
                        endereço : @endereco.Logradouro, @endereco.Numero<br>
                        @endereco.Bairro, @endereco.Cidade / @endereco.Uf<br>
                        telefone : @instituicao.Telefone
                    </address>
                </div>
            </div>
        }
        <div class="row-fluid">
            <div class="span3">
                <div class="well sidebar-nav">
                    <ul class="nav nav-list">
                        <li class="nav-header">Cadastros</li>
                        @if (ContaSession.ContaDoTipoCentro())
                        {
                            <li><a href="@Url.Action("Index", "Entidade")"><i class="icon-home"></i>Entidades</a></li>
                            <li><a href="@Url.Action("Index", "Account", new { id = ContaSession.ContaNaSessao().Instituicao.Id })">
                                <i class="icon-user"></i>Usuários</a></li>
                        }
                        else if (ContaSession.ContaDoTipoEntidade())
                        { 
                            <li><a href="@Url.Action("Index", "Membro", new { id = ContaSession.InstituicaoDaConta().Id })">
                                <i class="icon-home"></i>Membros</a></li>
                            <li><a href="@Url.Action("ChangePassword", "Account")"><i class="icon-user"></i>Mudar
                                senha</a></li>
                        }
                        else if (ContaSession.UsuarioDoPerfilSuper())
                        {
                            <li>@Html.ActionLink("Centro Administrativo", "Index", "Centro")</li>
                        }
                        <li class="nav-header">Sistema</li>
                        <li>@Html.ActionLink("Home", "Index", "Home")</li>
                        <li>@Html.ActionLink("Sobre", "About", "Home")</li>
                        <li class="divider"></li>
                        <li>@Html.ActionLink("Sair", "LogOff", "Account")</li>
                    </ul>
                </div>
                <!--/.well -->
            </div>
            <div class="span9 well">
                @RenderBody()
            </div>
        </div>
    </div>
</body>
