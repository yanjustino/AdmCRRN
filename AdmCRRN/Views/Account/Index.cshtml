@model IEnumerable<AdmCRRN.Models.ViewModel.UsuarioViewModel>
@{
    ViewBag.Title = "Index";
    var tipoInstituicao = "centro";
    if (Model.Count() > 0)
    { 
        tipoInstituicao = Model.First().TipoInstituicao.ToLower();
    }
}
<h2>
    Index</h2>
<p>
    @if (tipoInstituicao == "centro")
    { 
        @Html.ActionLink("Novo Usuário administrador", "RegisterAdmin", "Account")
    }
    @if (tipoInstituicao == "entidade")
    { 
        @Html.ActionLink("Novo Usuário da Entidade", "Register", "Account", new { id = Model.First().IdInstituicao }, null)
    }
</p>
<table>
    <tr>
        <th>
            Nome
        </th>
        <th>
            Email
        </th>
        <th>
            Nome da Instituição
        </th>
        <th>
        </th>
    </tr>
    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Nome)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Email)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.NomeInstituicao)
            </td>
            <td>
                @Html.ActionLink("Mudar Senha", "Edit", new { /* id=item.PrimaryKey */ }) |
            </td>
        </tr>
    }
</table>
<p>
    @Html.ActionLink("Voltar", "Index", "Account")
</p>
